<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CARWASA • Customer Portal</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  
  <style>
    :root {
      --navy: #08245c;
      --blue: #2275a9;
      --light-bg: #CEE8F6;
      --input-bg: #f8fcff;
      --readonly-bg: #e6f4ff;
      --border-blue: #b8dcff;
      --red: #e74c3c;
      --shadow: 0 6px 18px rgba(8,36,92,0.1);
      --footer-bg: #041230;
      --cyan: #45cade;
      --text-light: #c0d4e0;
    }

    * { margin:0; padding:0; box-sizing:border-box; }
    html, body { height:100%; font-family:'Segoe UI',sans-serif; background:var(--light-bg); display:flex; flex-direction:column; }
    body { padding-top:70px; }

    /* NAVBAR */
    .navbar {
      position:fixed; top:10px; left:50%; transform:translateX(-50%);
      width:86%; max-width:1250px; background:white; padding:9px 18px;
      border-radius:30px; box-shadow:var(--shadow); display:flex; align-items:center;
      justify-content:space-between; z-index:1000; height:50px;
    }
    .logo-left { display:flex; align-items:center; gap:10px; }
    .logo img { height:32px; border-radius:5px; }
    .carwasa-text { font-size:16.5px; font-weight:800; color:var(--navy); letter-spacing:0.8px; }

    .nav-right { display:flex; align-items:center; gap:18px; position:relative; }
    .nav-links { display:flex; gap:16px; }
    .nav-links a { font-size:14px; font-weight:600; color:var(--navy); transition:color 0.2s; }
    .nav-links a:hover { color:var(--blue); }
    .hamburger { font-size:21px; color:var(--navy); cursor:pointer; padding:8px; border-radius:50%; transition:background 0.2s; }
    .hamburger:hover { background:rgba(34,117,169,0.1); }

    /* PERFECT DROPDOWN MENU - EXACTLY LIKE YOUR SCREENSHOT */
    #hamburgerDropdown {
      position: absolute;
      top: 64px;
      right: 8px;
      width: 280px;
      background: linear-gradient(135deg, #1e3a8a, #0ea5e9);
      border-radius: 20px;
      overflow:hidden;
      box-shadow: 0 20px 45px rgba(0,0,0,0.35);
      display: none;
      z-index: 9999;
      color: white;
    }
    #hamburgerDropdown::before {
      content: '';
      position: absolute;
      top: -10px;
      right: 20px;
      width: 0; height: 0;
      border-left: 14px solid transparent;
      border-right: 14px solid transparent;
      border-bottom: 14px solid #1e3a8a;
    }

    .dropdown-header {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 22px 24px;
      background: rgba(255,255,255,0.12);
      backdrop-filter: blur(10px);
    }
    .dropdown-avatar {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      color: #1e3a8a;
      font-weight: bold;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    .dropdown-user h4 { font-size: 16.5px; font-weight: 700; margin: 0; }
    .dropdown-user p { font-size: 13px; opacity: 0.95; margin: 4px 0 0; font-weight: 500; }

    .dropdown-links a {
      display: flex;
      align-items: center;
      gap: 18px;
      padding: 16px 26px;
      color: white;
      font-size: 15.5px;
      font-weight: 600;
      text-decoration: none;
      transition: all 0.25s;
    }
    .dropdown-links a:hover {
      background: rgba(255,255,255,0.18);
      padding-left: 32px;
    }
    .dropdown-links i { width: 22px; font-size: 18px; opacity: 0.95; }

    /* MAIN CONTENT */
    .wrapper { max-width:1300px; margin:0 auto; padding:20px; display:flex; gap:30px; flex-wrap:wrap; flex:1; }

    .profile-box { flex:1; min-width:340px; max-width:460px; background:white; border-radius:22px; overflow:hidden; box-shadow:var(--shadow); }
    .profile-header { background:linear-gradient(135deg,#0b3d91,var(--navy)); padding:32px 20px 28px; text-align:center; color:white; }
    .profile-header img { width:88px; height:88px; border-radius:50%; object-fit:cover; border:4px solid white; }
    .profile-header h2 { font-size:19px; font-weight:700; margin:10px 0 3px; }
    .profile-header p { font-size:13px; opacity:0.9; }

    .profile-form { padding:22px 24px 28px; }
    .form-section { margin-bottom:20px; }
    .section-title { display:flex; align-items:center; gap:8px; font-size:14.5px; font-weight:600; color:var(--blue); margin-bottom:12px; }

    .input-group { margin-bottom:16px; position:relative; }
    .input-group label { font-size:12.5px; color:#555; margin-bottom:5px; display:block; }

    .input-wrapper {
      position:relative; display:flex; align-items:center;
    }
    .input-wrapper input,
    .input-wrapper .readonly-box {
      flex:1; height:48px; padding:0 50px 0 16px;
      border:1.4px solid var(--border-blue); border-radius:10px;
      background:var(--input-bg); font-size:14.5px; color:var(--navy);
      outline:none;
    }
    .readonly-box { background:var(--readonly-bg); font-weight:700; text-transform:uppercase; }

    .edit-trigger {
      position:absolute; right:14px; color:var(--blue); font-size:18px;
      cursor:pointer; opacity:0; pointer-events:none; transition:opacity 0.25s;
    }
    .input-wrapper:hover .edit-trigger { opacity:1; pointer-events:all; }

    /* SAVE BUTTONS (BACK!) */
    .save-btn {
      position: absolute;
      right: 10px;
      top: 38px;
      background: var(--blue);
      color: white;
      border: none;
      padding: 6px 14px;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }
    .input-group.editing .save-btn {
      opacity: 1;
      pointer-events: all;
    }

    /* MODALS */
    .modal-overlay {
      position:fixed; top:0; left:0; width:100%; height:100%;
      background:rgba(0,0,0,0.55); display:none; align-items:center; justify-content:center; z-index:9999;
    }
    .modal {
      background:white; width:90%; max-width:420px; border-radius:18px; padding:32px 28px;
      box-shadow:0 15px 40px rgba(0,0,0,0.25); text-align:center;
    }
    .modal h3 { margin:0 0 20px; color:var(--navy); font-size:21px; font-weight:700; }
    .modal-input {
      width:100%; padding:13px 16px; margin:10px 0;
      border:1.5px solid var(--border-blue); border-radius:12px;
      font-size:15px; outline:none;
    }
    .modal-buttons { display:flex; gap:12px; justify-content:center; margin-top:25px; }
    .btn-cancel { background:var(--red); color:white; padding:11px 24px; border-radius:10px; cursor:pointer; font-weight:600; }
    .btn-action { background:var(--blue); color:white; padding:11px 32px; border-radius:10px; cursor:pointer; font-weight:600; }

    .analytics-box { flex:2; min-width:340px; background:white; border-radius:22px; padding:28px; box-shadow:var(--shadow); display:flex; flex-direction:column; }
    .chart-wrapper { flex:1; min-height:380px; margin-bottom:24px; position:relative; }
    .disconnect-card { background:#f0f8ff; border-radius:18px; padding:28px 24px; text-align:center; border:1px solid #b8dcff; }
    .disconnect-buttons { display:flex; flex-direction:column; gap:14px; align-items:center; margin-top:15px; }
    .btn-red, .btn-blue {
      width:100%; max-width:300px; padding:14px 32px; border:none; border-radius:12px;
      font-size:16px; font-weight:bold; cursor:pointer; color:white;
      display:flex; align-items:center; justify-content:center; gap:10px;
    }
    .btn-red { background:#e74c3c; }
    .btn-blue { background:#2275a9; }

    /* FOOTER */
    .site-footer-main {
      background: var(--footer-bg);
      color: white;
      padding: 80px 0 30px;
      margin-top: auto;
    }
    .footer-container { max-width: 1200px; margin: 0 auto; padding: 0 40px; }
    .footer-grid { display: grid; grid-template-columns: 2fr 1fr 1fr 1.5fr; gap: 60px; margin-bottom: 60px; align-items: start; }
    .footer-title { font-size: 17px; font-weight: 700; margin-bottom: 24px; padding-bottom: 10px; position: relative; }
    .footer-title::after { content: ''; position: absolute; bottom: 0; left: 0; width: 40px; height: 3px; background: var(--cyan); border-radius: 2px; }
    .footer-brand-header { display: flex; align-items: center; gap: 12px; margin-bottom: 18px; }
    .footer-logo-img { width: 42px; height: 42px; filter: brightness(0) invert(1); }
    .footer-brand-name { font-size: 21px; font-weight: 800; }
    .footer-desc { font-size: 14px; line-height: 1.7; color: var(--text-light); margin-bottom: 25px; }
    .social-links { display: flex; gap: 12px; }
    .social-icon { width: 38px; height: 38px; background: rgba(255,255,255,0.12); border-radius: 50%; display:flex; align-items:center; justify-content:center; color:white; font-size:17px; transition:0.3s; }
    .social-icon:hover { background:var(--cyan); transform:translateY(-3px); }
    .footer-links, .contact-list { display:flex; flex-direction:column; gap:15px; font-size:14.2px; color:var(--text-light); }
    .footer-links a { color:inherit; transition:color 0.3s; }
    .footer-links a:hover { color:var(--cyan); }
    .contact-list div { display:flex; align-items:flex-start; gap:10px; }
    .contact-list i { color:var(--cyan); width:18px; flex-shrink:0; margin-top:2px; }
    .footer-copyright { text-align:center; padding-top:30px; border-top:1px solid rgba(69,202,222,0.3); font-size:13.5px; color:#8899b0; }

    @media (max-width:992px) { .wrapper{flex-direction:column;align-items:center;} }
    @media (max-width:640px) { .footer-grid{grid-template-columns:1fr;text-align:center;gap:45px;} }
  </style>
</head>
<body>

  <!-- NAVBAR + PERFECT DROPDOWN -->
  <div class="navbar">
    <div class="logo-left">
      <div class="logo"><img src="images/logo.png" alt="Logo" onerror="this.style.display='none'"></div>
      <span class="carwasa-text">CARWASA</span>
    </div>

    <div class="nav-right">
      <div class="nav-links">
        <a href="#">Services</a>
        <a href="about.html">About</a>
      </div>
      <div class="hamburger" id="hamburger">
        <i class="fas fa-bars"></i>
      </div>
    </div>

    <div id="hamburgerDropdown">
      <div class="dropdown-header">
        <div class="dropdown-avatar">
          <i class="fas fa-user"></i>
        </div>
        <div class="dropdown-user">
          <h4>JOHN PAUL TOMAQUIN</h4>
          <p>Active Account</p>
        </div>
      </div>
      <div class="dropdown-links">
        <a href="profile.html"><i class="fas fa-user"></i> Profile</a>
        <a href="payment-history.html"><i class="fas fa-receipt"></i> Payment History</a>
        <a href="logout.html"><i class="fas fa-sign-out-alt"></i> Logout</a>
      </div>
    </div>
  </div>

  <!-- MAIN CONTENT -->
  <div class="wrapper">
    <div class="profile-box">
      <div class="profile-header">
        <img src="images/535175141_24165442996472442_6707241502682199637_n.jpg" alt="Profile">
        <h2>JOHN PAUL TOMAQUIN</h2>
        <p>Active Account</p>
      </div>

      <div class="profile-form">
        <div class="form-section">
          <div class="section-title">Contact Information</div>
          <div class="input-group">
            <label>Email Address</label>
            <div class="input-wrapper">
              <input type="email" value="johnpaul@example.com" readonly>
              <i class="fas fa-edit edit-trigger" onclick="enableEdit(this, 'email')"></i>
              <button class="save-btn" onclick="saveField(this)">Save</button>
            </div>
          </div>
          <div class="input-group">
            <label>Contact Number</label>
            <div class="input-wrapper">
              <input type="text" value="0912-345-6789" readonly>
              <i class="fas fa-edit edit-trigger" onclick="enableEdit(this, 'phone')"></i>
              <button class="save-btn" onclick="saveField(this)">Save</button>
            </div>
          </div>
        </div>

        <div class="form-section">
          <div class="section-title">Address</div>
          <div class="input-group">
            <label>Home Address</label>
            <div class="input-wrapper">
              <div class="readonly-box">CASAY, DALAGUETE, CEBU</div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <div class="section-title">Security</div>
          <div class="input-group">
            <label>Password</label>
            <div class="input-wrapper">
              <input type="password" value="••••••••••" readonly disabled>
              <i class="fas fa-edit edit-trigger" onclick="openPasswordModal()"></i>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ANALYTICS WITH BAR GRAPH (FULLY BACK!) -->
    <div class="analytics-box">
      <div class="chart-wrapper">
        <canvas id="consumptionChart"></canvas>
      </div>
      <div class="disconnect-card">
        <h3>Need to Disconnect Service?</h3>
        <p>Initiate disconnection request or download the official form.</p>
        <div class="disconnect-buttons">
          <button class="btn-red">
            <i class="fas fa-download"></i> Download Form
          </button>
          <button class="btn-blue">
            <i class="fas fa-upload"></i> Upload Form for Disconnection
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- PASSWORD MODAL -->
  <div class="modal-overlay" id="passwordModal">
    <div class="modal">
      <h3>Change Password</h3>
      <input type="password" class="modal-input" placeholder="Current Password">
      <input type="password" class="modal-input" placeholder="New Password">
      <input type="password" class="modal-input" placeholder="Confirm New Password">
      <div class="forgot-text">Forgot Password?</div>
      <div class="modal-buttons">
        <button class="btn-cancel" onclick="closePasswordModal()">Cancel</button>
        <button class="btn-action" onclick="savePassword()">Save Changes</button>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <footer class="site-footer-main">
    <div class="footer-container">
      <div class="footer-grid">
        <div class="footer-col">
          <div class="footer-brand-header">
            <img src="images/logo.png" alt="CARWASA Logo" class="footer-logo-img" onerror="this.style.display='none'">
            <h3 class="footer-brand-name">CARWASA</h3>
          </div>
          <p class="footer-desc">
            Casay Rural Waterworks and Sanitation Association (CARWASA) is dedicated to providing clean, safe, and reliable water services to the residents of Casay, Dalaguete, Cebu.
          </p>
          <div class="social-links">
            <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
            <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
            <a href="#" class="social-icon"><i class="fab fa-youtube"></i></a>
          </div>
        </div>
        <div class="footer-col">
          <h3 class="footer-title">EXPLORE</h3>
          <div class="footer-links">
            <a href="#">Water Supply & Distribution</a>
            <a href="#">Quality Testing & Monitoring</a>
            <a href="#">Leak Detection & Repair</a>
            <a href="#">New Connection Services</a>
          </div>
        </div>
        <div class="footer-col">
          <h3 class="footer-title">SERVICES</h3>
          <div class="footer-links">
            <a href="#">Apply for New Connection</a>
            <a href="#">Pay Water Bill</a>
            <a href="#">Request Leak Repair</a>
            <a href="#">Emergency Water Response</a>
          </div>
        </div>
        <div class="footer-col">
          <h3 class="footer-title">CONTACT US</h3>
          <div class="contact-list">
            <div><i class="fas fa-map-marker-alt"></i> Casay, Dalaguete, Cebu</div>
            <div><i class="fas fa-phone-alt"></i> +63 912 345 6789</div>
            <div><i class="fas fa-envelope"></i> support@carwasa.gov.ph</div>
          </div>
        </div>
      </div>
      <div class="footer-copyright">© 2025 CARWASA | All Rights Reserved.</div>
    </div>
  </footer>

  <script>
    // Hamburger Menu
    const hamburger = document.getElementById('hamburger');
    const dropdown = document.getElementById('hamburgerDropdown');
    hamburger.addEventListener('click', (e) => {
      e.stopPropagation();
      dropdown.style.display = (dropdown.style.display === 'block') ? 'none' : 'block';
    });
    document.addEventListener('click', (e) => {
      if (!hamburger.contains(e.target) && !dropdown.contains(e.target)) {
        dropdown.style.display = 'none';
      }
    });

    // Enable editing + show Save button
    function enableEdit(icon, type) {
      const input = icon.previousElementSibling;
      const group = icon.parentElement.parentElement;
      input.removeAttribute('readonly');
      input.focus();
      group.classList.add('editing');
    }

    function saveField(btn) {
      const group = btn.parentElement.parentElement;
      const input = group.querySelector('input');
      input.setAttribute('readonly', true);
      group.classList.remove('editing');
      alert('Changes saved successfully!');
    }

    // Password Modal
    function openPasswordModal() { document.getElementById('passwordModal').style.display = 'flex'; }
    function closePasswordModal() { document.getElementById('passwordModal').style.display = 'none'; }
    function savePassword() { alert("Password changed successfully!"); closePasswordModal(); }

    // BAR GRAPH - FULLY WORKING
    const ctx = document.getElementById('consumptionChart').getContext('2d');
    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],
        datasets: [{
          label: 'Water Consumption (m³)',
          data: [8, 12, 15, 14, 18, 22, 25, 21, 19, 23, 26, 24],
          backgroundColor: '#3498db',
          borderRadius: 8,
          barThickness: 28,
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: { 
          title: { 
            display: true, 
            text: 'Monthly Consumption 2025', 
            font: { size: 20, weight: 'bold' }, 
            color: '#08245c',
            padding: { bottom: 20 }
          }
        },
        scales: { 
          y: { beginAtZero: true, max: 30, ticks: { stepSize: 5 } }
        }
      }
    });
  </script>
</body>
</html>